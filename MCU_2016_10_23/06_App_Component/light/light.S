#======================================================================
#文件名称：light.s
#功能概要：小灯驱动程序文件
#======================================================================
#include "light.inc"

#======================================================================
# 函数名称：  light_init
# 函数返回： 无
# 参数说明：r0:(端口号)|(引脚号),例:(PTB_NUM|(5u))表示B口5脚,头文件中有宏定义
#          r3:设定小灯状态。由light.inc中宏定义。
# 功能概要：  指示灯驱动初始化
#======================================================================
light_init:
    push {r0-r3,lr}         @保存现场，将下一条指令地址入栈
    mov r2,#1               @小灯为输出
    bl gpio_init            @调用gpio初始化函数
    pop {r0-r3,pc}          @恢复现场，返回主程序处继续执行

#======================================================================
# 函数名称：    light_control
# 函数返回：     无                
# 参数说明：   r0：(端口号)|(引脚号),例:(PTB_NUM|(5u))表示B口5脚,头文件中有宏定义
#            r3：设定小灯状态。由light.inc中宏定义。
# 功能概要：控制指示灯亮暗。
#======================================================================
light_control:
    push {r0-r3,lr}
    mov r2,#1               @小灯为输出
    bl gpio_set             @调用gpio引脚设置函数
    pop {r0-r3,pc}

#======================================================================
# 函数名称：    light_change
# 函数返回：     无                
# 参数说明：    r0:(端口号)|(引脚号),例:(PTB_NUM|(5u))表示B口5脚,头文件中有宏定义
# 功能概要：切换指示灯亮暗。
#======================================================================
light_change:
    push {r0-r3,lr}
    bl gpio_reverse            @调用后sgpio引脚反转函数
    pop {r0-r3,pc}
 

